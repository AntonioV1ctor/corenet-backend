(ns corenet-backend.db.db
  (:require
   [datomic.api :as d]))

(def db-uri "datomic:dev://localhost:4334/corenet")
(d/create-database db-uri)
(def conn (d/connect db-uri))

(def schema
  [{:db/ident       :blog/titulo
    :db/valueType   :db.type/string
    :db/cardinality :db.cardinality/one
    :db/doc         "titulo da postagem"}
   
   {:db/ident       :blog/conteudo
    :db/valueType   :db.type/string
    :db/cardinality :db.cardinality/one
    :db/doc         "conteudo da postagem"}])

@(d/transact conn schema)

(defn transactor [conect array]
  (d/transact conect array))

(def all-movies-q '[:find ?e 
                    :where [?e :blog/titulo]])

(all-movies-q)
